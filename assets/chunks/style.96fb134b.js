import{d as ct,h as Q,p as ut,w as O,o as lt,c as dt,z as U,r as V}from"./framework.8bc654d7.js";const ft={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_LEFT:2,BOTTOM_RIGHT:3};function gt(){var k=100,R=["webkit","moz",""],I="http://www.w3.org/2000/svg",c="peel-",L,u,E,p,g,y=document.documentElement,Z=y.style;function B(t){for(var e,n,i=0;i<R.length;i++)if(e=R[i],n=e?e+nt(t):t,n in Z)return n}function K(){L=B("clipPath"),u=B("transform"),E=B("boxShadow"),p=B("filter"),tt(),o.supported=!!(L&&u),o.effectsSupported=g}function tt(){var t=document.createElement("div"),e=t.style;e.cssText="background:linear-gradient(45deg,#9f9,white);",g=(e.backgroundImage||"").indexOf("gradient")>-1}function w(t){return Math.round(t*k)/k}function M(t){return Math.max(0,Math.min(1,t))}function Y(t,e,n){return(t-e)/(n-e)}function et(t,e){return(e||1)*2*(.5-Math.abs(t-.5))}function nt(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function it(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function C(t){return c+t}function ot(t,e){t.style[L]=e}function _(t,e){t.style[u]=e}function rt(t,e,n,i,r,s){t.style[E]=$(e,n,i,r,s)}function st(t,e,n,i,r){t.style[p]="drop-shadow("+$(e,n,i,null,r)+")"}function $(t,e,n,i,r){return w(t)+"px "+w(e)+"px "+w(n)+"px "+(i?w(i)+"px ":"")+"rgba(0,0,0,"+w(r)+")"}function F(t,e){t.style.opacity=e}function H(t,e,n){if(g){var i;n.length===0?i="none":i="linear-gradient("+w(e)+"deg,"+n.join(",")+")",t.style.backgroundImage=i}}function z(t,e,n){t.addEventListener(e,n)}function N(t,e,n){t.removeEventListener(e,n)}function j(t,e){var n=t.changedTouches?t.changedTouches[0]:t;return{x:n.clientX-e.getBoundingClientRect().left,y:n.clientY-e.getBoundingClientRect().top}}function b(t,e){return q(0,0,0,t,e)}function D(t,e){return q(255,255,255,t,e)}function q(t,e,n,i,r){return i=w(M(i)),"rgba("+t+","+e+","+n+","+i+") "+w(r*100)+"%"}function X(t,e){return typeof t=="string"&&(t=(e||document).querySelector(t)),t}function at(t,e){var n=document.createElement("div");return A(n,e),t.appendChild(n),n}function A(t,e){t.classList.add(e)}function ht(t){return t.style.zIndex}function pt(t,e){t.style.zIndex=e}function x(t,e,n){e=e||y;var i=document.createElementNS(I,t);e.appendChild(i);for(var r in n)n.hasOwnProperty(r)&&G(i,r,n[r]);return i}function G(t,e,n){t.setAttributeNS(null,e,n)}function o(t,e){this.setOptions(e),this.el=X(t,y),this.constraints=[],this.events=[],this.dragHandlers=[],this.setupLayers(),this.setupDimensions(),this.setCorner(this.getOption("corner")),this.setMode(this.getOption("mode")),this.init()}o.Corners=ft,o.Defaults={topShadow:!0,topShadowBlur:5,topShadowAlpha:.5,topShadowOffsetX:0,topShadowOffsetY:1,topShadowCreatesShape:!0,backReflection:!1,backReflectionSize:.02,backReflectionOffset:0,backReflectionAlpha:.15,backReflectionDistribute:!0,backShadow:!0,backShadowSize:.04,backShadowOffset:0,backShadowAlpha:.1,backShadowDistribute:!0,bottomShadow:!0,bottomShadowSize:1.5,bottomShadowOffset:0,bottomShadowDarkAlpha:.7,bottomShadowLightAlpha:.1,bottomShadowDistribute:!0,setPeelOnInit:!0,clippingBoxScale:4,flipConstraintOffset:5,dragPreventsDefault:!0},o.prototype.setCorner=function(){var t=arguments;t[0]===void 0?t=[o.Corners.BOTTOM_RIGHT]:t[0].length&&(t=t[0]),this.corner=this.getPointOrCorner(t)},o.prototype.setMode=function(t){t==="book"?(this.addPeelConstraint(o.Corners.BOTTOM_LEFT),this.addPeelConstraint(o.Corners.TOP_LEFT),this.setOption("backReflection",!1),this.setOption("backShadowDistribute",!1),this.setOption("bottomShadowDistribute",!1)):t==="calendar"&&(this.addPeelConstraint(o.Corners.TOP_RIGHT),this.addPeelConstraint(o.Corners.TOP_LEFT))},o.prototype.setPeelPath=function(t,e){var n=arguments,i,r,s,h;i=new a(t,e),n.length===4?(r=new a(n[2],n[3]),this.path=new d(i,r)):n.length===8&&(s=new a(n[2],n[3]),h=new a(n[4],n[5]),r=new a(n[6],n[7]),this.path=new W(i,s,h,r))},o.prototype.handleDrag=function(t,e){this.dragHandlers.push(t),this.setupDragEvents(e)},o.prototype.handlePress=function(t,e){this.pressHandler=t,this.setupDragEvents(e)},o.prototype.setupDragEvents=function(t){var e=this,n,i,r;if(this.dragEventsSetup)return;t=t||this.el;function s(f,m){e.getOption("dragPreventsDefault")&&m.preventDefault(),i=f?"touchmove":"mousemove",r=f?"touchend":"mouseup",z(y,i,h),z(y,r,l),n=!1}function h(f){e.dragHandlers.forEach(m=>{v(m,f)}),n=!0}function l(f){!n&&e.pressHandler&&v(e.pressHandler,f),N(y,i,h),N(y,r,l)}function v(f,m){var J=j(m,e.el);f.call(e,m,J.x,J.y)}this.addEvent(t,"mousedown",s.bind(this,!1)),this.addEvent(t,"touchstart",s.bind(this,!0)),this.dragEventsSetup=!0},o.prototype.removeEvents=function(){this.events.forEach(function(t,e){N(t.el,t.type,t.handler)}),this.events=[]},o.prototype.setTimeAlongPath=function(t){t=M(t);var e=this.path.getPointForTime(t);this.timeAlongPath=t,this.setPeelPosition(e.x,e.y)},o.prototype.setFadeThreshold=function(t){this.fadeThreshold=t},o.prototype.setPeelPosition=function(){var t=this.getPointOrCorner(arguments);t=this.getConstrainedPeelPosition(t),t&&(this.peelLineSegment=this.getPeelLineSegment(t),this.peelLineRotation=this.peelLineSegment.getAngle(),this.setClipping(),this.setBackTransform(t),this.setEffects())},o.prototype.addPeelConstraint=function(){var t=this.getPointOrCorner(arguments),e=this.corner.subtract(t).getLength();this.constraints.push(new T(t,e)),this.calculateFlipConstraint()},o.prototype.setOption=function(t,e){this.options[t]=e},o.prototype.getOption=function(t){return this.options[it(t)]},o.prototype.getAmountClipped=function(){var t=this.getTopClipArea(),e=this.width*this.height;return Y(t,e,0)},o.prototype.addEvent=function(t,e,n){return z(t,e,n),this.events.push({el:t,type:e,handler:n}),n},o.prototype.getTopClipArea=function(){var t=new S;return this.elementBox.forEach(function(e){this.distributeLineByPeelLine(e,t)},this),S.getArea(t.getPoints())},o.prototype.calculateFlipConstraint=function(){var t=this.corner,e=this.constraints.concat();this.flipConstraint=e.sort(function(n,i){return t.y-n.center.y,t.y-i.center.y,n-i})[0]},o.prototype.dragStart=function(t,e,n){},o.prototype.fireHandler=function(t,e){var n=j(t,this.el);e.call(this,t,n.x,n.y)},o.prototype.setClipping=function(){var t=new S,e=new S;this.clippingBox.forEach(function(n){this.distributeLineByPeelLine(n,t,e)},this),this.topClip.setPoints(t.getPoints()),this.backClip.setPoints(e.getPoints())},o.prototype.distributeLineByPeelLine=function(t,e,n){var i=this.peelLineSegment.getIntersectPoint(t);this.distributePointByPeelLine(t.p1,e,n),this.distributePointByPeelLine(i,e,n)},o.prototype.distributePointByPeelLine=function(t,e,n){if(t){var i=this.peelLineSegment.getPointDeterminant(t);i<=0&&e.addPoint(t),i>=0&&n&&n.addPoint(this.flipPointHorizontally(t))}},o.prototype.setOptions=function(t){var e=t||{},n=o.Defaults;for(var i in n)!n.hasOwnProperty(i)||i in e||(e[i]=n[i]);this.options=e},o.prototype.findOrCreateLayer=function(t,e,n){var i=t+"-element",r=C(t),s=X(this.getOption(i)||"."+r,e);return s||(s=at(e,r)),A(s,C("layer")),pt(s,n),s},o.prototype.getPointOrCorner=function(t){return t.length===2?new a(t[0],t[1]):typeof t[0]=="number"?this.getCornerPoint(t[0]):t[0]},o.prototype.getCornerPoint=function(t){var e=+!!(t&1)*this.width,n=+!!(t&2)*this.height;return new a(e,n)},o.prototype.getOptionalShape=function(){var t=["rect","polygon","path","circle"],e;return t.some(function(n){var i=this.getOption(n),r;return i&&(r={},r.attributes=i,r.type=n,e=r),e},this),e},o.prototype.setupLayers=function(){var t=this.getOptionalShape(),e=this.topLayer=this.findOrCreateLayer("top",this.el,2),n=this.backLayer=this.findOrCreateLayer("back",this.el,3);this.bottomLayer=this.findOrCreateLayer("bottom",this.el,1),t?(this.topLayer=this.wrapShapeLayer(this.topLayer,"top-outer-clip"),this.backLayer=this.wrapShapeLayer(this.backLayer,"back-outer-clip"),this.topShapeClip=new P(e,t),this.backShapeClip=new P(n,t),this.bottomShapeClip=new P(this.bottomLayer,t),this.getOption("topShadowCreatesShape")&&(this.topShadowElement=this.setupDropShadow(t,e))):this.topShadowElement=this.findOrCreateLayer("top-shadow",e,1),this.topClip=new P(this.topLayer),this.backClip=new P(this.backLayer),this.backShadowElement=this.findOrCreateLayer("back-shadow",n,1),this.backReflectionElement=this.findOrCreateLayer("back-reflection",n,2),this.bottomShadowElement=this.findOrCreateLayer("bottom-shadow",this.bottomLayer,1),this.usesBoxShadow=!t},o.prototype.setupDropShadow=function(t,e){var n=x("svg",e,{class:C("layer")});return x(t.type,n,t.attributes),n},o.prototype.wrapShapeLayer=function(t,e){var n=ht(t);A(t,C("shape-layer"));var i=this.findOrCreateLayer(e,this.el,n);return i.appendChild(t),i},o.prototype.setupDimensions=function(){this.width=this.el.offsetWidth,this.height=this.el.offsetHeight,this.center=new a(this.width/2,this.height/2),this.elementBox=this.getScaledBox(1),this.clippingBox=this.getScaledBox(this.getOption("clippingBoxScale"))},o.prototype.getScaledBox=function(t){var e=t,n=t-1,i=new a(-this.width*n,-this.height*n),r=new a(this.width*e,-this.height*n),s=new a(this.width*e,this.height*e),h=new a(-this.width*n,this.height*e);return[new d(i,r),new d(r,s),new d(s,h),new d(h,i)]},o.prototype.getConstrainedPeelPosition=function(t){return this.constraints.forEach(function(e){var n=this.getFlipConstraintOffset(e,t);n&&(e=new T(e.center,e.radius-n)),t=e.constrainPoint(t)},this),t},o.prototype.getFlipConstraintOffset=function(t,e){var n=this.getOption("flipConstraintOffset");if(t===this.flipConstraint&&n){var i=this.corner.subtract(this.center),r=this.corner.subtract(t.center),s=r.getAngle();r.rotate(-s);var h=e.subtract(t.center).rotate(-s);if(i.x*i.y<0&&(h.y*=-1),h.x>0&&h.y>0)return Y(h.getAngle(),45,0)*n}},o.prototype.getPeelLineSegment=function(t){var e=this.corner.subtract(t).scale(.5),n=t.add(e);e.x===0&&e.y===0&&(e=t.subtract(this.center));var i=e.getLength(),r=Math.max(this.width,this.height)/i*10,s=e.rotate(-90).scale(r),h=n.add(s),l=n.subtract(s);return new d(h,l)},o.prototype.setBackTransform=function(t){var e=this.flipPointHorizontally(this.corner),n=(this.peelLineRotation-90)*2,i=t.subtract(e.rotate(n)),r="translate("+w(i.x)+"px, "+w(i.y)+"px) rotate("+w(n)+"deg)";_(this.backLayer,r),_(this.topShadowElement,r)},o.prototype.getPeelLineDistance=function(){var t,e,n,i;this.peelLineRotation<90?(t=o.Corners.TOP_RIGHT,e=o.Corners.BOTTOM_LEFT):this.peelLineRotation<180?(t=o.Corners.BOTTOM_RIGHT,e=o.Corners.TOP_LEFT):this.peelLineRotation<270?(t=o.Corners.BOTTOM_LEFT,e=o.Corners.TOP_RIGHT):this.peelLineRotation<360&&(t=o.Corners.TOP_LEFT,e=o.Corners.BOTTOM_RIGHT),n=this.getCornerPoint(t),i=this.getCornerPoint(e);var r=new d(n,i).scale(2),s=this.peelLineSegment.getIntersectPoint(r);if(!s)return 2;var h=n.subtract(s).getLength(),l=n.subtract(i).getLength();return h/l},o.prototype.setEffects=function(){var t=this.getPeelLineDistance();this.setTopShadow(t),this.setBackShadow(t),this.setBackReflection(t),this.setBottomShadow(t),this.setFade()},o.prototype.setTopShadow=function(t){if(this.getOption("topShadow")){var e=this.getOption("topShadowBlur"),n=this.getOption("topShadowOffsetX"),i=this.getOption("topShadowOffsetY"),r=this.getOption("topShadowAlpha"),s=this.exponential(t,5,r);this.usesBoxShadow?rt(this.topShadowElement,n,i,e,0,s):st(this.topShadowElement,n,i,e,s)}},o.prototype.distributeOrLinear=function(t,e,n){return e?et(t,n):t*n},o.prototype.exponential=function(t,e,n){return n*M(Math.pow(1+t,e)-1)},o.prototype.setBackReflection=function(t){var e=[];if(this.canSetLinearEffect("backReflection",t)){var n=this.getOption("backReflectionDistribute"),i=this.getOption("backReflectionSize"),r=this.getOption("backReflectionOffset"),s=this.getOption("backReflectionAlpha"),h=this.distributeOrLinear(t,n,i),l=t-r,v=l-h,f=v-h;e.push(D(0,0)),e.push(D(0,f)),e.push(D(s,v)),e.push(D(0,l))}H(this.backReflectionElement,180-this.peelLineRotation,e)},o.prototype.setBackShadow=function(t){var e=[];if(this.canSetLinearEffect("backShadow",t)){var n=this.getOption("backShadowSize"),i=this.getOption("backShadowOffset"),r=this.getOption("backShadowAlpha"),s=this.getOption("backShadowDistribute"),h=this.distributeOrLinear(t,s,n),l=t-i,v=l-h,f=v-h;e.push(b(0,0)),e.push(b(0,f)),e.push(b(r,v)),e.push(b(r,l))}H(this.backShadowElement,180-this.peelLineRotation,e)},o.prototype.setBottomShadow=function(t){var e=[];if(this.canSetLinearEffect("bottomShadow",t)){var n=this.getOption("bottomShadowSize"),i=this.getOption("bottomShadowOffset"),r=this.getOption("bottomShadowDarkAlpha"),s=this.getOption("bottomShadowLightAlpha"),h=this.getOption("bottomShadowDistribute"),l=t-(.025-i),v=l-this.distributeOrLinear(t,h,.03)*n-i,f=v-(.02*n-i);e=[b(0,0),b(0,f),b(s,v),b(s,l),b(r,t)]}H(this.bottomShadowElement,this.peelLineRotation+180,e)},o.prototype.canSetLinearEffect=function(t,e){return this.getOption(t)&&e>0},o.prototype.setFade=function(){var t=this.fadeThreshold,e=1,n;t&&(this.timeAlongPath!==void 0?n=this.timeAlongPath:n=this.getAmountClipped(),n>t&&(e=(1-n)/(1-t)),F(this.topLayer,e),F(this.backLayer,e),F(this.bottomShadowElement,e))},o.prototype.flipPointHorizontally=function(t){return new a(t.x-(t.x-this.center.x)*2,t.y)},o.prototype.init=function(){this.getOption("setPeelOnInit")&&this.setPeelPosition(this.corner),A(this.el,C("ready"))};function P(t,e){this.el=t,this.shape=P.createClipPath(t,e||{type:"polygon"}),_(this.el,"translate(0px,0px)")}P.getDefs=function(){return this.defs||(this.svg=x("svg",null,{class:C("svg-clip-element")}),this.defs=x("defs",this.svg)),this.defs},P.createClipPath=function(t,e){var n=P.getId(),i=x("clipPath",this.getDefs()),r=x(e.type,i,e.attributes);return G(i,"id",n),ot(t,"url(#"+n+")"),r},P.getId=function(){return"svg-clip-"+crypto.randomUUID()},P.prototype.setPoints=function(t){var e=t.map(function(n){return w(n.x)+","+w(n.y)}).join(" ");G(this.shape,"points",e)};function T(t,e){this.center=t,this.radius=e}T.prototype.containsPoint=function(t){if(this.boundingRectContainsPoint(t)){var e=this.center.x-t.x,n=this.center.y-t.y;e*=e,n*=n;var i=e+n,r=this.radius*this.radius;return i<=r}return!1},T.prototype.boundingRectContainsPoint=function(t){return t.x>=this.center.x-this.radius&&t.x<=this.center.x+this.radius&&t.y>=this.center.y-this.radius&&t.y<=this.center.y+this.radius},T.prototype.constrainPoint=function(t){if(!this.containsPoint(t)){var e=t.subtract(this.center).getAngle();t=this.center.add(new a(this.radius,0).rotate(e))}return t};function S(){this.points=[]}S.getArea=function(t){var e=0,n=0;return t.forEach(function(i,r,s){var h=s[(r+1)%s.length];e+=i.x*h.y,n+=i.y*h.x}),(e-n)/2},S.prototype.addPoint=function(t){this.points.push(t)},S.prototype.getPoints=function(){return this.points};function W(t,e,n,i){this.p1=t,this.c1=e,this.p2=i,this.c2=n}W.prototype.getPointForTime=function(t){var e=Math.pow(1-t,3),n=3*t*Math.pow(1-t,2),i=3*Math.pow(t,2)*(1-t),r=Math.pow(t,3),s=e*this.p1.x+n*this.c1.x+i*this.c2.x+r*this.p2.x,h=e*this.p1.y+n*this.c1.y+i*this.c2.y+r*this.p2.y;return new a(s,h)};function d(t,e){this.p1=t,this.p2=e}d.EPSILON=1e-6,d.prototype.getPointForTime=function(t){return this.p1.add(this.getVector().scale(t))},d.prototype.scale=function(t){var e=this.p1.add(this.p2.subtract(this.p1).scale(t)),n=this.p2.add(this.p1.subtract(this.p2).scale(t));return new d(e,n)},d.prototype.getPointDeterminant=function(t){var e=(t.x-this.p1.x)*(this.p2.y-this.p1.y)-(t.y-this.p1.y)*(this.p2.x-this.p1.x);return e>-d.EPSILON&&e<d.EPSILON&&(e=0),e},d.prototype.getIntersectPoint=function(t){var e=this;function n(f,m){return f.x*m.y-f.y*m.x}var i=e.p2.subtract(e.p1),r=t.p2.subtract(t.p1),s=n(t.p1.subtract(e.p1),i),h=n(i,r);if(h==0)return null;var l=s/h,v=n(t.p1.subtract(e.p1),r)/h;return v>=0&&v<=1&&l>=0&&l<=1?e.p1.add(i.scale(v)):null},d.prototype.getAngle=function(){return this.getVector().getAngle()},d.prototype.getVector=function(){return this.vector||(this.vector=this.p2.subtract(this.p1)),this.vector};function a(t,e){this.x=t,this.y=e}return a.DEGREES_IN_RADIANS=180/Math.PI,a.degToRad=function(t){return t/a.DEGREES_IN_RADIANS},a.radToDeg=function(t){for(var e=t*a.DEGREES_IN_RADIANS;e<0;)e+=360;return e},a.vector=function(t,e){var n=a.degToRad(t);return new a(Math.cos(n)*e,Math.sin(n)*e)},a.prototype.add=function(t){return new a(this.x+t.x,this.y+t.y)},a.prototype.subtract=function(t){return new a(this.x-t.x,this.y-t.y)},a.prototype.scale=function(t){return new a(this.x*t,this.y*t)},a.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},a.prototype.getAngle=function(){return a.radToDeg(Math.atan2(this.y,this.x))},a.prototype.setAngle=function(t){return a.vector(t,this.getLength())},a.prototype.rotate=function(t){return this.setAngle(this.getAngle()+t)},K(),o}const yt={class:"peel-top"},vt={class:"peel-back"},wt={class:"peel-bottom"},bt=ct({__name:"Peel",props:{handleElement:null,peelPosition:null,corner:null,constraints:null,drag:{type:Boolean},mode:null,fadeThreshold:null,peelPath:null,options:null},emits:["drag"],setup(k,{expose:R,emit:I}){const c=k,L=Q(null),u=Q(null);function E(){u.value.removeEvents(),u.value.dragEventsSetup=!1,u.value.dragHandlers=[],u.value.handleDrag((p,g,y)=>I("drag",{event:p,x:g,y,amountClipped:u.value.getAmountClipped()}),c.handleElement),c.drag&&u.value.handleDrag((p,g,y)=>u.value.setPeelPosition(g,y),c.handleElement)}return ut(()=>{const p=gt();if(u.value=new p(L.value,c.options),E(),c.peelPosition&&u.value.setPeelPosition(c.peelPosition.x,c.peelPosition.y),c.corner)if(c.corner.hasOwnProperty("x")&&c.corner.hasOwnProperty("y")){const{x:g,y}=c.corner;u.value.setCorner(g,y)}else u.value.setCorner(c.corner);c.constraints&&c.constraints.forEach(g=>{u.value.addPeelConstraint(g)}),c.mode&&u.value.setMode(c.mode),c.fadeThreshold&&u.value.setFadeThreshold(c.fadeThreshold),c.peelPath&&u.value.setPeelPath(...c.peelPath)}),O(()=>c.handleElement,p=>{p&&E()}),O(()=>c.peelPosition,p=>{p&&u.value.setPeelPosition(p.x,p.y)}),O(()=>c.corner,p=>{if(p)if(p.hasOwnProperty("x")&&p.hasOwnProperty("y")){const{x:g,y}=c.corner;u.value.setCorner(g,y)}else u.value.setCorner(c.corner)}),O(()=>c.constraints,p=>{p&&(u.value.constraints=[],p.forEach(g=>{u.value.addPeelConstraint(g)}))}),O(()=>c.mode,p=>{p&&u.value.setMode(p)}),O(()=>c.fadeThreshold,p=>{p&&u.value.setFadeThreshold(p)}),O(()=>c.peelPath,p=>{p&&u.value.setPeelPath(...p)}),R({peel:u}),(p,g)=>(lt(),dt("div",{ref_key:"peelRef",ref:L,class:"peel"},[U("div",yt,[V(p.$slots,"top")]),U("div",vt,[V(p.$slots,"back")]),U("div",wt,[V(p.$slots,"bottom")])],512))}});export{ft as d,bt as m};
